当有订单时，司机客户端得到订单信息后，可以选择

## 处理流程



* 司机客户端：提供`开始接单`按钮，用户点击该按钮时，则定时向服务器发送空闲报文。提供`停止接单`按钮，当司机停止接单时，将不向服务器发送空闲报文。

* 应用服务器：利用空闲报文中携带的位置信息，更新司机位置。查看订单表，是否有该司机的未决订单，如果有则返回订单信息。否则不返回。

* 数据服务器：订单信息查询





## 接口

* 应用服务器：`http://app-server/order`

* 数据服务器：`http://data-server/sql`



## 数据报文

### 客户端到应用服务器

```

{

 cmd: "orderget",

 sessionid: "sessionid",

 pos: {

 longitude: 120.010203,

 latitude: 45.010203,

 name: "北京清河中街"

 }

}

```

### 服务器到客户端

- 有订单时返回



```

{

 cmd: "ordergetack",

 result: "ok"

 order: {



 }

}

```



- 无订单时返回



```

{

 cmd: "ordergetack",

 result: "fail"

}

```



### 数据服务器

略



## 数据表结构

见订单表结构


